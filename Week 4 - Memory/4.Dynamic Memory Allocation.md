
• We’ve seen one way to work with pointers, namely pointing a pointer variable at another variable that already exists in our system. 
	• This requires us to know exactly how much memory our system will need at the moment our program is compiled. 

• What if we don’t know how much memory we’ll need at compile-time? How do we get access to new memory while our program is running?

• We can use pointers to get access to a block of dynamically-allocated memory at runtime. 

• Dynamically allocated memory comes from a pool of memory known as the heap. 

• Prior to this point, all memory we’ve been working with has been coming from a pool of memory known as the stack.

![[Screenshot 2024-07-18 at 11.40.19 PM.png]]

• We get this dynamically-allocated memory by making a call to the C standard library function malloc(), passing as its parameter the number of bytes requested. 

• After obtaining memory for you (if it can), malloc() will return a pointer to that memory. 

• What if malloc() can’t give you memory? It’ll hand you back NULL.

```c
// statically obtain an integer 
int x; 

// dynamically obtain an integer 
int *px = malloc(sizeof(int));
// -> int *px = malloc(4);
```

```c
// get an integer from the user 
int x = GetInt(); 

// array of floats on the stack 
float stack_array[x]; 

// array of floats on the heap 
float* heap_array = malloc(x * sizeof(float));
```

• Here’s the trouble: Dynamically-allocated memory is not automatically returned to the system for later use when the function in which it’s created finishes execution. 

• Failing to return memory back to the system when you’re finished with it results in a memory leak which can compromise your system’s performance. 

• When you finish working with dynamically-allocated memory, you must `free()` it.

```c
char* word = malloc(50 * sizeof(char)); 

// do stuff with word 

// now we’re done working with that block 
free(word);
```

• Three golden rules: 

1. Every block of memory that you malloc() must subsequently be free()d. 

2. Only memory that you malloc() should be free()d. 

3. Do not free() a block of memory more than once.

![[Screenshot 2024-07-19 at 12.01.36 AM.png]]

![[Screenshot 2024-07-19 at 12.01.54 AM.png]]

![[Screenshot 2024-07-19 at 12.02.09 AM.png]]

![[Screenshot 2024-07-19 at 12.02.23 AM.png]]

![[Screenshot 2024-07-19 at 12.02.44 AM.png]]

![[Screenshot 2024-07-19 at 12.02.58 AM.png]]

![[Screenshot 2024-07-19 at 12.03.15 AM.png]]

![[Screenshot 2024-07-19 at 12.03.28 AM.png]]

![[Screenshot 2024-07-19 at 12.03.44 AM.png]]

![[Screenshot 2024-07-19 at 12.03.56 AM.png]]

![[Screenshot 2024-07-19 at 12.04.21 AM.png]]

![[Screenshot 2024-07-19 at 12.04.35 AM.png]]

![[Screenshot 2024-07-19 at 12.04.50 AM.png]]

![[Screenshot 2024-07-19 at 12.05.03 AM.png]]

![[Screenshot 2024-07-19 at 12.05.16 AM.png]]

![[Screenshot 2024-07-19 at 12.05.31 AM.png]]

![[Screenshot 2024-07-19 at 12.05.40 AM.png]]